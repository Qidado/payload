{"version":3,"sources":["../../../src/collections/endpoints/findByID.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { isNumber } from '../../utilities/isNumber.js'\nimport { type JoinParams, sanitizeJoinParams } from '../../utilities/sanitizeJoinParams.js'\nimport { sanitizePopulateParam } from '../../utilities/sanitizePopulateParam.js'\nimport { sanitizeSelectParam } from '../../utilities/sanitizeSelectParam.js'\nimport { findByIDOperation } from '../operations/findByID.js'\n\nexport const findByIDHandler: PayloadHandler = async (req) => {\n  const { searchParams } = req\n  const { id, collection } = getRequestCollectionWithID(req)\n  const depth = searchParams.get('depth')\n  const trash = searchParams.get('trash') === 'true'\n\n  const result = await findByIDOperation({\n    id,\n    collection,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: searchParams.get('draft') === 'true',\n    joins: sanitizeJoinParams(req.query.joins as JoinParams),\n    populate: sanitizePopulateParam(req.query.populate),\n    req,\n    select: sanitizeSelectParam(req.query.select),\n    trash,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["status","httpStatus","getRequestCollectionWithID","headersWithCors","isNumber","sanitizeJoinParams","sanitizePopulateParam","sanitizeSelectParam","findByIDOperation","findByIDHandler","req","searchParams","id","collection","depth","get","trash","result","Number","undefined","draft","joins","query","populate","select","Response","json","headers","Headers","OK"],"mappings":"AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,QAAQ,QAAQ,8BAA6B;AACtD,SAA0BC,kBAAkB,QAAQ,wCAAuC;AAC3F,SAASC,qBAAqB,QAAQ,2CAA0C;AAChF,SAASC,mBAAmB,QAAQ,yCAAwC;AAC5E,SAASC,iBAAiB,QAAQ,4BAA2B;AAE7D,OAAO,MAAMC,kBAAkC,OAAOC;IACpD,MAAM,EAAEC,YAAY,EAAE,GAAGD;IACzB,MAAM,EAAEE,EAAE,EAAEC,UAAU,EAAE,GAAGX,2BAA2BQ;IACtD,MAAMI,QAAQH,aAAaI,GAAG,CAAC;IAC/B,MAAMC,QAAQL,aAAaI,GAAG,CAAC,aAAa;IAE5C,MAAME,SAAS,MAAMT,kBAAkB;QACrCI;QACAC;QACAC,OAAOV,SAASU,SAASI,OAAOJ,SAASK;QACzCC,OAAOT,aAAaI,GAAG,CAAC,aAAa;QACrCM,OAAOhB,mBAAmBK,IAAIY,KAAK,CAACD,KAAK;QACzCE,UAAUjB,sBAAsBI,IAAIY,KAAK,CAACC,QAAQ;QAClDb;QACAc,QAAQjB,oBAAoBG,IAAIY,KAAK,CAACE,MAAM;QAC5CR;IACF;IAEA,OAAOS,SAASC,IAAI,CAACT,QAAQ;QAC3BU,SAASxB,gBAAgB;YACvBwB,SAAS,IAAIC;YACblB;QACF;QACAV,QAAQC,WAAW4B,EAAE;IACvB;AACF,EAAC"}